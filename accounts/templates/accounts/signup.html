{% comment %} accounts/templates/accounts/signup.html {% endcomment %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>{% block title %}AIフレンドスケジュール - 新規登録{% endblock %}</title>
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans+JP%3Awght%40400%3B500%3B700%3B900&family=Spline+Sans%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
        body {
            font-family: "Spline Sans", "Noto Sans JP", sans-serif;
        }
        .material-symbols-outlined {
            font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
        }
        .form-input-with-icon {
            position: relative;
        }
        .form-input-with-icon .icon-prefix {
            position: absolute;
            left: 0.75rem; /* pl-3 */
            top: 50%;
            transform: translateY(-50%);
            color: #a8a29e; /* stone-400 */
            pointer-events: none;
            font-size: 1.25rem;
        }
        .form-input-styled {
            display: block;
            width: 100%;
            border-radius: 0.5rem;
            border-width: 1px;
            border-color: #d6d3d1; /* stone-300 */
            background-color: #f5f5f4; /* stone-50 */
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            /* padding-left は input タグに直接指定 */
            padding-right: 0.75rem;
            font-size: 0.875rem;
            color: #1c1917; /* stone-900 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        .form-input-styled::placeholder { color: #a8a29e; }
        .form-input-styled:focus {
            border-color: #699bcd;
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 2px rgba(105, 155, 205, 0.5);
        }
        /* Django Messages Framework (ログイン画面と共通) */
        .django-messages { padding: 1rem; margin-bottom: 1rem; border-radius: 0.375rem; font-size: 0.875rem; border-width: 1px; }
        .django-messages.debug { background-color: #f3f4f6; color: #374151; border-color: #d1d5db; }
        .django-messages.info { background-color: #eff6ff; color: #1d4ed8; border-color: #bfdbfe; }
        .django-messages.success { background-color: #f0fdf4; color: #15803d; border-color: #86efac; }
        .django-messages.warning { background-color: #fefce8; color: #a16207; border-color: #fde047; }
        .django-messages.error { background-color: #fef2f2; color: #b91c1c; border-color: #fecaca; }
        .form-field-errors { list-style-type: none; padding: 0; margin-top: 0.25rem; }
        .form-field-errors li { color: #ef4444; font-size: 0.75rem; }
    </style>
</head>
<body class="bg-white">
    <div class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            {# --- ヘッダー (変更なし) --- #}
            <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-stone-200 px-6 sm:px-10 py-4 shadow-sm">
                <a href="{% url 'landing_page' %}" class="flex items-center gap-3 text-stone-800">
                    <div class="size-7 text-[#699bcd]">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h1 class="text-stone-800 text-xl font-bold leading-tight tracking-[-0.015em]">AIフレンドスケジュール</h1>
                </a>
                <div class="flex items-center gap-4">
                    <a class="text-sm font-medium text-stone-600 hover:text-[#699bcd] transition-colors" href="{% url 'accounts:login' %}">
                        ログイン
                    </a>
                    <a class="flex items-center justify-center rounded-lg bg-[#699bcd] px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-[#588ac7] transition-colors focus:outline-none focus:ring-2 focus:ring-[#699bcd] focus:ring-offset-2" href="{% url 'accounts:signup' %}">
                        新規登録
                    </a>
                </div>
            </header>

            {# --- メインコンテンツ (変更なし) --- #}
            <main class="flex-1 bg-stone-50 py-8 sm:py-12 px-4 sm:px-6 lg:px-8">
                <div class="mx-auto w-full max-w-md rounded-xl bg-white p-6 sm:p-8 shadow-lg">
                    <h2 class="text-center text-2xl sm:text-3xl font-bold tracking-tight text-stone-800 mb-6 sm:mb-8">アカウント作成</h2>

                    {% if messages %}
                        {% for message in messages %}
                            <div class="django-messages {% if message.tags %}{{ message.tags }}{% else %}info{% endif %}">
                                {{ message|safe }}
                            </div>
                        {% endfor %}
                    {% endif %}

                    {% if form.non_field_errors %}
                        <div class="django-messages error">
                            {% for error in form.non_field_errors %}
                                <p>{{ error }}</p>
                            {% endfor %}
                        </div>
                    {% endif %}

                    <form class="space-y-6" method="POST" action="{% url 'accounts:signup' %}">
                        {% csrf_token %}
                        
                        {# --- Username --- #}
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1" for="{{ form.username.id_for_label }}">ユーザー名</label>
                            <div class="form-input-with-icon">
                                <span class="material-symbols-outlined icon-prefix">person</span>
                                <input 
                                    type="text"
                                    name="{{ form.username.html_name }}"
                                    id="{{ form.username.id_for_label }}"
                                    class="form-input-styled pl-10 {% if form.username.errors %}border-red-500 focus:border-red-500 focus:ring-red-500/20{% else %}border-stone-300 focus:border-[#699bcd] focus:ring-[#699bcd]/50{% endif %}" {# ✨ pl-10 (2.5rem) に変更！ #}
                                    placeholder="例: aifriend_user" required
                                    value="{{ form.username.value|default_if_none:'' }}"
                                />
                            </div>
                            {% if form.username.help_text %}
                                <p class="mt-1 text-xs text-stone-500">{{ form.username.help_text|safe }}</p>
                            {% endif %}
                            {% if form.username.errors %}
                                <ul class="form-field-errors">
                                    {% for error in form.username.errors %}<li>{{ error }}</li>{% endfor %}
                                </ul>
                            {% endif %}
                        </div>

                        {# --- Email --- #}
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1" for="{{ form.email.id_for_label }}">メールアドレス</label>
                            <div class="form-input-with-icon">
                                <span class="material-symbols-outlined icon-prefix">email</span>
                                <input
                                    type="email"
                                    name="{{ form.email.html_name }}"
                                    id="{{ form.email.id_for_label }}"
                                    class="form-input-styled pl-10 {% if form.email.errors %}border-red-500 focus:border-red-500 focus:ring-red-500/20{% else %}border-stone-300 focus:border-[#699bcd] focus:ring-[#699bcd]/50{% endif %}" {# ✨ pl-10 (2.5rem) に変更！ #}
                                    placeholder="例: user@example.com" required
                                    value="{{ form.email.value|default_if_none:'' }}"
                                />
                            </div>
                            {% if form.email.errors %}
                                <ul class="form-field-errors">
                                    {% for error in form.email.errors %}<li>{{ error }}</li>{% endfor %}
                                </ul>
                            {% endif %}
                        </div>

                        {# --- Password 1 --- #}
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1" for="{{ form.password1.id_for_label }}">パスワード</label>
                            <div class="form-input-with-icon">
                                <span class="material-symbols-outlined icon-prefix">lock</span>
                                <input
                                    type="password"
                                    name="{{ form.password1.html_name }}"
                                    id="{{ form.password1.id_for_label }}"
                                    class="form-input-styled pl-10 {% if form.password1.errors %}border-red-500 focus:border-red-500 focus:ring-red-500/20{% else %}border-stone-300 focus:border-[#699bcd] focus:ring-[#699bcd]/50{% endif %}" {# ✨ pl-10 (2.5rem) に変更！ #}
                                    placeholder="8文字以上で入力してください" required
                                />
                            </div>
                            {% if form.password1.help_text %}
                                <p class="mt-1 text-xs text-stone-500">{{ form.password1.help_text|safe }}</p>
                            {% else %}
                                <p class="mt-1 text-xs text-stone-500">8文字以上で入力してください。</p>
                            {% endif %}
                            {% if form.password1.errors %}
                                <ul class="form-field-errors">
                                    {% for error in form.password1.errors %}<li>{{ error }}</li>{% endfor %}
                                </ul>
                            {% endif %}
                        </div>

                        {# --- Password 2 (Confirm Password) --- #}
                        <div>
                            <label class="block text-sm font-medium text-stone-700 mb-1" for="{{ form.password2.id_for_label }}">パスワード（確認用）</label>
                            <div class="form-input-with-icon">
                                <span class="material-symbols-outlined icon-prefix">lock_reset</span>
                                <input
                                    type="password"
                                    name="{{ form.password2.html_name }}"
                                    id="{{ form.password2.id_for_label }}"
                                    class="form-input-styled pl-10 {% if form.password2.errors %}border-red-500 focus:border-red-500 focus:ring-red-500/20{% else %}border-stone-300 focus:border-[#699bcd] focus:ring-[#699bcd]/50{% endif %}" {# ✨ pl-10 (2.5rem) に変更！ #}
                                    placeholder="もう一度パスワードを入力してください" required
                                />
                            </div>
                            {% if form.password2.errors %}
                                <ul class="form-field-errors">
                                    {% for error in form.password2.errors %}<li>{{ error }}</li>{% endfor %}
                                </ul>
                            {% endif %}
                        </div>
                        
                        <!-- --- 利用規約チェックボックス (HTMLコメントアウト) --- -->
                        <!-- 
                        (省略)
                        -->
                        <!-- --- ここまで利用規約 --- -->

                        <div>
                            <button class="flex w-full justify-center rounded-lg bg-[#699bcd] px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-[#588ac7] transition-colors focus:outline-none focus:ring-2 focus:ring-[#699bcd] focus:ring-offset-2" type="submit">
                                新規登録する
                            </button>
                        </div>
                    </form>

                    <p class="mt-8 text-center text-sm text-stone-600">
                        すでにアカウントをお持ちですか？
                        <a class="font-semibold text-[#699bcd] hover:text-[#588ac7] hover:underline" href="{% url 'accounts:login' %}">ログイン</a>
                    </p>
                </div>
            </main>

            {# --- フッター (変更なし) --- #}
            <footer class="border-t border-solid border-stone-200 bg-white py-6 px-4 sm:px-6 lg:px-8">
                <p class="text-center text-xs text-stone-500">© {% now "Y" %} AIフレンドスケジュール. All rights reserved.</p>
            </footer>
        </div>
    </div>
</body>
</html>
